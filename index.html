<!-- Initialize App - Improved version -->
<script>
    // Function to check if ZoonApp is available
    function checkAndInitialize() {
        if (typeof ZoonApp === 'function') {
            initializeApp();
        } else {
            // Try again in 100ms if not ready
            setTimeout(checkAndInitialize, 100);
        }
    }
    
    // Function to initialize the application
    function initializeApp() {
        try {
            window.app = new ZoonApp();
            console.log('ZoonApp initialized successfully');
            
            // Set up header CTA button
            const headerCta = document.getElementById('header-cta');
            if (headerCta) {
                headerCta.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.app.loadPage('contact');
                    window.app.scrollToTop();
                });
            }
            
            // Check URL hash for routing
            const hash = window.location.hash.replace('#', '');
            if (hash && hash !== 'home') {
                window.app.loadPage(hash);
            } else {
                // Ensure home page is loaded if no hash or hash is home
                window.app.loadPage('home');
            }
            
            // Initialize logo click
            const logo = document.querySelector('.logo-main');
            if (logo) {
                logo.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.app.loadPage('home');
                    window.app.scrollToTop();
                });
            }
            
        } catch (error) {
            console.error('Failed to initialize ZoonApp:', error);
            // Show error message to user
            const mainContent = document.getElementById('main-content');
            if (mainContent) {
                mainContent.innerHTML = `
                    <div style="text-align: center; padding: 100px 20px;">
                        <h2>Application Error</h2>
                        <p>Failed to load the application. Please refresh the page.</p>
                        <button onclick="window.location.reload()" class="cta-button">
                            <i class="fas fa-redo"></i> Refresh Page
                        </button>
                    </div>
                `;
            }
        }
    }
    
    // Start checking when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
        checkAndInitialize();
    });
    </script>